<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>抓捕番茄大作戰</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="icon.png" type="image/png">
  <link rel="shortcut icon" href="icon.png" type="image/png">
</head>
<body>
  <header>
    <h1>抓捕番茄大作戰</h1>
    <div class="logo-container">
      <img src="icon.png" alt="icon">
      <img src="level.png" alt="level">
    </div>
    
  </header>
  
  <main>
    <section class="game-info">
      <h2>遊戲簡介</h2>
      <br>
      <p>這是一款以水果和蔬菜間的戰鬥為題材的塔防遊戲。在這款遊戲中，玩家受水果國委託，去蔬菜國抓捕番茄公主，進行一系列的抓捕行動。在每一次的戰鬥中，玩家需透過彈弓射出角色，利用射出的角色們保衛自己的主塔，並擊敗敵塔。</p>
      <br>
      <video width="400" height="180" controls autoplay>
        <source src="intro.mp4" type="video/mp4">
        您的瀏覽器不支持 video 標籤。
      </video>
    </section>
    
    <section class="download">
      <h2>下載遊戲</h2>
      <br>
      <p>請掃描以下 QR Code 或點擊連結下載遊戲 APK 檔案。</p>
      <img id="qrCode" src="" alt="APK 下載 QR Code">
      <a id="downloadLink" href="" download>下載 APK</a>
    </section>
    
    <section class="dev-team">
      <h2>開發團隊</h2>
      <br>
      <p>我們是師大資工系的塔防手遊開發團隊。雖然我們的成員都是第一次參與遊戲開發，但我們充滿熱情、創意和渴望學習的精神。</p>
    </section>
  </main>
  
  <footer>
    <p>&copy; 2023 NTNU CSIE SE Group 1</p>
  </footer>

  <script>
    fetch('https://api.github.com/repos/Raylin0722/SE-project/releases/latest')
      .then(response => response.json())
      .then(data => {
        const latestRelease = data.tag_name;
        const apkDownloadLink = `https://github.com/Raylin0722/SE-project/releases/download/${latestRelease}/CatchTomato_${latestRelease}.apk`;
        const qrCodeURL = `https://chart.googleapis.com/chart?cht=qr&chl=${apkDownloadLink}&chs=150x150`;

        document.getElementById('qrCode').src = qrCodeURL;
        document.getElementById('downloadLink').href = apkDownloadLink;
        document.getElementById('downloadLink').innerHTML = `下載 APK (${latestRelease})`
      })
      .catch(error => {
        console.error('Error:', error);
      });
  </script>
</body>
</html>
